can_be_knight = {
	trigger_if = {
		limit = {
			OR = {
				is_playable_character = no
				root = root.court_owner
			}
			NOT = { exists = liege }
		}
		can_be_knight_trigger = { ARMY_OWNER = root.court_owner }
	}
	trigger_else = {
		can_be_knight_trigger = { ARMY_OWNER = liege }

		# Vassals who are at war cannot serve as knights
		OR = {
			AND = {
				has_game_rule = knight_eligibility_vassals_enabled
				NOT = { is_at_war = yes }
			}
			NOT = { has_game_rule = knight_eligibility_vassals_enabled }
		}

		# Vassals who are kings+ cannot serve as knights
		OR = {
			AND = {
				has_game_rule = knight_eligibility_vassals_enabled_1
				NOT = { highest_held_title_tier >= tier_kingdom }
			}
			NOT = { has_game_rule = knight_eligibility_vassals_enabled_1 }
		}

		# Vassals who are dukes+ cannot serve as knights
		OR = {
			AND = {
				has_game_rule = knight_eligibility_vassals_enabled_2
				NOT = { highest_held_title_tier >= tier_duchy }
			}
			NOT = { has_game_rule = knight_eligibility_vassals_enabled_2 }
		}


		# Vassals who are counts+ cannot serve as knights
		OR = {
			AND = {
				has_game_rule = knight_eligibility_vassals_enabled_3
				NOT = { highest_held_title_tier >= tier_county }
			}
			NOT = { has_game_rule = knight_eligibility_vassals_enabled_3 }
		}

		# Vassals can never serve as knights
		NOT = { has_game_rule = knight_eligibility_vassals_enabled_4 }
	}
}

can_command_troops = {
	can_be_commander_basic_trigger = { ARMY_OWNER = scope:army_owner }

	# Courtiers
	OR = {
		NOT = { has_game_rule = commander_eligibility_vassals_enabled_0 }
		AND = {
			has_game_rule = commander_eligibility_vassals_enabled_0
			is_courtier_of = scope:army_owner
		}
		this = scope:army_owner
	}

	# Dynasty Members
	OR = {
		NOT = { has_game_rule = commander_eligibility_vassals_enabled }
		AND = {
			has_game_rule = commander_eligibility_vassals_enabled
			dynasty = scope:army_owner.dynasty
		}
		this = scope:army_owner
	}

	# House Members
	OR = {
		NOT = { has_game_rule = commander_eligibility_vassals_enabled_2 }
		AND = {
			has_game_rule = commander_eligibility_vassals_enabled_2
			house = scope:army_owner.house
		}
		this = scope:army_owner
	}

	# Family Members
	OR = {
		NOT = { has_game_rule = commander_eligibility_vassals_enabled_3 }
		AND = {
			has_game_rule = commander_eligibility_vassals_enabled_3
			is_close_or_extended_family_of = scope:army_owner
		}
		this = scope:army_owner
	}

	# Ruler Only
	OR = {
		NOT = { has_game_rule = commander_eligibility_vassals_enabled_4 }
		AND = {
			has_game_rule = commander_eligibility_vassals_enabled_4
			this = scope:army_owner
		}
		this = scope:army_owner
	}
}
